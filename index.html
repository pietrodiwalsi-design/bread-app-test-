<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Bread & Soup Pro</title>
    <style>
        :root {
            --primary: #8d6e63;
            --dark: #4e342e;
            --accent: #ffa726;
            --soup-theme: #d32f2f;
            --search-theme: #546e7a;
            --bg: #fdf5e6;
            --glass: rgba(255, 255, 255, 0.98);
        }

        /* Universele Reset */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100dvh; /* Dynamic viewport height voor mobiel */
            overflow: hidden;
            background-color: var(--bg);
        }

        body {
            font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg) url('https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1000') center/cover fixed;
            display: flex;
            justify-content: center;
        }

        /* De App Drager */
        .app-shell {
            width: 100%;
            max-width: 500px;
            height: 100dvh;
            background: var(--glass);
            backdrop-filter: blur(12px);
            display: flex;
            flex-direction: column; /* Zorgt voor de vaste verdeling tussen Header, Main en Nav */
            box-shadow: 0 0 30px rgba(0,0,0,0.2);
        }

        header {
            padding: env(safe-area-inset-top) 1rem 1rem 1rem;
            text-align: center;
            background: white;
            border-bottom: 1px solid #eee;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* Het Schermgedeelte */
        main {
            flex: 1; /* Neemt alle beschikbare ruimte in tussen header en nav */
            overflow-y: auto;
            padding: 1.2rem;
            -webkit-overflow-scrolling: touch;
        }

        /* De Knoppenbalk (Universeel onderaan) */
        nav {
            flex-shrink: 0;
            width: 100%;
            height: calc(70px + env(safe-area-inset-bottom));
            background: white;
            display: flex;
            border-top: 1px solid #eee;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .nav-btn {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: #888;
            cursor: pointer;
            border: none;
            background: none;
            transition: color 0.2s;
        }

        .nav-btn.active { color: var(--primary); font-weight: bold; }
        .nav-btn span { font-size: 1.4rem; margin-bottom: 2px; }

        /* Kaarten & Content styling */
        .card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 6px solid var(--primary);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            text-align: left;
        }
        .card.soup { border-left-color: var(--soup-theme); }

        .img-hero {
            width: 100%;
            height: 180px;
            border-radius: 10px;
            object-fit: cover;
            margin-bottom: 1rem;
            background: #eee;
        }

        .info-block {
            background: #fafafa;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 1px solid #eee;
            font-size: 0.95rem;
        }

        .pro-tip {
            background: #fff3e0;
            border-left: 4px solid var(--accent);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        input {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd;
            margin-bottom: 1rem; font-size: 1rem;
        }
        ul { padding-left: 20px; }
        li { margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="app-shell">
    <header id="view-title">Bread & Soup Partner</header>
    
    <main id="app-view">
        </main>

    <nav>
        <button class="nav-btn" onclick="navigate('search')"><span>üåç</span>Search</button>
        <button class="nav-btn active" onclick="navigate('bread')" id="btn-bread"><span>üìü</span>Machine</button>
        <button class="nav-btn" onclick="navigate('general')" id="btn-general"><span>ü•ñ</span>General</button>
        <button class="nav-btn" onclick="navigate('soup')" id="btn-soup"><span>ü•£</span>Soup</button>
        <button class="nav-btn" onclick="navigate('timer')" id="btn-timer"><span>‚è∞</span>Timer</button>
    </nav>
</div>

<script>
    const API_KEY = "2386c821382b4094a3045c9c6ffd588d";

    const BREAD_DB = [
        { name: "Basic White Bread (Classic)", img: "witbrood.png", program: "Basic (Menu 1)", ingredients: ["1 tsp yeast", "500g bread flour", "30g butter", "1.5 tbsp sugar", "1.5 tsp salt", "340ml water"], toppings: "None", tips: "Use high protein flour (12%+) for the best rise." },
        { name: "Potato Rosemary Bread", img: "aardappelbrood.png", program: "Basic (Menu 1)", ingredients: ["1 tsp yeast", "400g spelt flour", "10g butter", "¬æ tsp sugar", "1¬æ tsp salt", "150g mashed potatoes", "2 tbsp rosemary", "150ml water"], toppings: "Fresh rosemary & sea salt", tips: "Potatoes keep the crumb soft for days." },
        { name: "Cashew & Walnut Bread", img: "notenbrood.png", program: "Basic Raisin (Menu 3)", ingredients: ["1 tsp yeast", "400g flour", "10g butter", "10g sesame", "280ml water", "150g mixed nuts"], toppings: "Sesame seeds", tips: "Add nuts at the beep to keep them chunky." },
        { name: "Crispy Herb Bread (Oven)", img: "frans_stokbrood.png", program: "Dough (Menu 17) + Oven", ingredients: ["1 tbsp yeast", "500g flour", "1 tbsp salt", "Rosemary & Thyme", "260ml lukewarm water"], toppings: "Olive oil and herbs", tips: "Machine kneads; shape and bake in the oven at 230¬∞C." },
        { name: "Brioche (Classic)", img: "brioche_brood.png", program: "Brioche (Menu 10)", ingredients: ["1.25 tsp yeast", "400g flour", "50g sugar", "60g butter", "2 eggs", "80g extra cold butter"], toppings: "None", tips: "Add cold butter cubes after the 55-min beep." },
        { name: "Focaccia", img: "focaccia_brood.png", program: "Dough (Menu 23/24)", ingredients: ["0.5 tsp yeast", "300g flour", "1 tbsp olive oil", "1 tsp salt", "170ml water"], toppings: "Sea salt and rosemary", tips: "Press deep dimples into the dough before adding oil." },
        { name: "Whole Wheat", img: "volkorenbrood.png", program: "Whole Wheat (Menu 7)", ingredients: ["1 tsp yeast", "400g whole wheat flour", "20g butter", "280ml water"], toppings: "None", tips: "Menu 7 provides a long soak for the best texture." },
        { name: "French Bread", img: "frans_stokbrood.png", program: "French (Menu 11)", ingredients: ["1 tsp yeast", "400g white flour", "1.5 tsp salt", "290ml water"], toppings: "Flour dusting", tips: "6-hour cycle for pure flour flavor and crispy crust." },
        { name: "Christmas Gingerbread", img: "brioche_brood.png", program: "Cake (Menu 15)", ingredients: ["40ml oil", "3 ripe bananas", "170g flour", "2 eggs", "100g dates", "Spices"], toppings: "Walnut halves", tips: "Scrape the sides of the pan after 2 mins mixing." },
        { name: "Panettone Style", img: "panettone.png", program: "Basic Raisin (Menu 3)", ingredients: ["7g yeast", "500g flour", "100g butter", "250ml milk", "Dried fruit"], toppings: "Sugar glaze", tips: "Use 'Light Crust' setting to protect the sugars." },
        { name: "Pizza Dough", img: "pizza_deeg.png", program: "Pizza (Menu 23)", ingredients: ["1 tsp yeast", "450g flour", "4 tbsp oil", "240ml water"], toppings: "Cornmeal", tips: "Roll thin and bake at 220¬∞C." },
        { name: "Protein Bread (S)", img: "proteine.png", program: "Whole Wheat (Menu 5)", ingredients: ["¬æ tsp yeast", "291g flour", "128g cottage cheese", "125g egg whites"], toppings: "None", tips: "Cottage cheese adds protein and keeps it moist." },
        { name: "Strawberry Jam", img: "jam.png", program: "Jam (Menu 21)", ingredients: ["300g strawberries", "200g sugar", "7g pectin"], toppings: "None", tips: "Pour into jars while boiling hot." },
        { name: "Fruit Compote", img: "witbrood.png", program: "Compote (Menu 22)", ingredients: ["400g fruit", "2 tbsp sugar", "1 tbsp water"], toppings: "None", tips: "Cut fruit into even 2cm cubes." }
    ];

    const SOUP_DB = [
        { name: "Minestrone (Rich Italian)", img: "minestrone.png", pairing: "Focaccia", ingredients: ["Onion/Celery/Carrot", "Beans", "Stock", "Pasta"], instructions: "Saut√© veg for 10m. Add stock, beans, and pasta. Simmer until tender.", tips: "Perfect with fresh Focaccia." },
        { name: "Spicy Carrot Soup", img: "spicy_carrot.png", pairing: "Potato Rosemary Bread", ingredients: ["Carrots", "Onion", "Spices", "Stock", "Yogurt"], instructions: "Toast spices, saut√© onion, simmer carrots in stock for 25m, blend.", tips: "Roasting spices is essential." },
        { name: "Creamy Zucchini-Herb", img: "zucchini_herb.png", pairing: "French Bread", ingredients: ["Zucchini", "Spring onion", "Herbs", "Cream cheese"], instructions: "Simmer veg for 15m, blend, stir in cream cheese.", tips: "Use less stock than root soups." },
        { name: "Creamy Mustard Soup", img: "creamy_mustard.png", pairing: "Basic White Bread", ingredients: ["Leek", "Potatoes", "Mustard", "Cream"], instructions: "Fry leek/potato in butter. Simmer with mustard/stock for 15m. Puree.", tips: "Use coarse Groninger mustard." },
        { name: "Chickpea & Sweet Potato", img: "chickpea_sweet_potato.png", pairing: "Cashew & Walnut Bread", ingredients: ["Chickpeas", "Sweet potatoes", "Pepper", "Lime"], instructions: "Simmer all for 20m, puree smooth, finish with lime juice.", tips: "Potato starch makes it creamy." },
        { name: "Roasted Tomato Soup", img: "roasted_tomato.png", pairing: "Basic White (Grilled Cheese)", ingredients: ["Tomatoes", "Balsamic", "Pepper", "Basil"], instructions: "Saut√© veg, deglaze with balsamic, simmer 15m, blend.", tips: "Balsamic balances the acidity." }
    ];

    const view = document.getElementById('app-view');
    const viewTitle = document.getElementById('view-title');

    function navigate(target) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        // Zoek de knop op basis van onclick attribuut als de event niet direct beschikbaar is
        const activeBtn = document.querySelector(`.nav-btn[onclick="navigate('${target}')"]`);
        if(activeBtn) activeBtn.classList.add('active');

        view.innerHTML = "";
        view.scrollTo(0,0);

        switch(target) {
            case 'search': renderSearch(); break;
            case 'bread': renderList(BREAD_DB, 'bread'); break;
            case 'soup': renderList(SOUP_DB, 'soup'); break;
            case 'timer': renderTimer(); break;
            case 'general': view.innerHTML = "<div class='info-block'>Coming soon! Prepare your hand-kneaded recipes.</div>"; break;
        }
    }

    function renderList(db, type) {
        viewTitle.innerText = type === 'bread' ? "Panasonic Collection" : "Soup Collection";
        db.forEach((item) => {
            const card = document.createElement('div');
            card.className = `card ${type === 'soup' ? 'soup' : ''}`;
            card.innerHTML = `
                <div style="font-weight:bold; display:flex; justify-content:space-between; align-items:center;">
                    ${item.name} 
                    <span style="font-size:0.8rem; color:var(--primary);">VIEW ‚ûú</span>
                </div>
            `;
            card.onclick = () => renderDetail(item, type);
            view.appendChild(card);
        });
    }

    function renderDetail(item, type) {
        view.innerHTML = `
            <button onclick="navigate('${type}')" style="background:none; border:none; color:#888; margin-bottom:1rem; padding:10px 0; cursor:pointer; font-weight:bold;">‚¨Ö BACK TO LIST</button>
            ${item.pairing ? `<div style="background:#f1f8e9; padding:12px; border-radius:8px; margin-bottom:15px; color:#2e7d32; font-weight:bold; font-size:0.85rem;">ü•ñ PAIRS WITH: ${item.pairing}</div>` : ''}
            <img src="${item.img}" class="img-hero" onerror="this.src='https://via.placeholder.com/450x200?text=${item.name}'">
            <h2 style="margin:0 0 1rem 0;">${item.name}</h2>
            ${item.program ? `<div class="info-block"><strong>Program:</strong> ${item.program}</div>` : ''}
            <div class="info-block"><strong>Ingredients:</strong><ul>${item.ingredients.map(i => `<li>${i}</li>`).join('')}</ul></div>
            ${item.toppings ? `<div class="info-block"><strong>Toppings:</strong> ${item.toppings}</div>` : ''}
            ${item.instructions ? `<div class="info-block"><strong>Method:</strong><br>${item.instructions}</div>` : ''}
            <div class="pro-tip"><strong>Pro Tips:</strong><br>${item.tips}</div>
        `;
        view.scrollTo(0,0);
    }

    function renderTimer() {
        viewTitle.innerText = "Machine Timer";
        view.innerHTML = `
            <div class="info-block">
                <p>Huidige Tijd:</p>
                <input type="time" id="t1" value="${new Date().toTimeString().slice(0,5)}">
                <p>Klaar Om:</p>
                <input type="time" id="t2">
                <button class="card" style="width:100%; background:var(--dark); color:white; border:none; margin-top:10px; padding:15px;" onclick="calculate()">CALCULATE DELAY</button>
            </div>
            <div id="res" class="info-block" style="display:none; text-align:center; font-size:1.8rem; background:#e8f5e9; border-color:#c8e6c9;"></div>
        `;
    }

    function calculate() {
        const t1 = document.getElementById('t1').value.split(':'), t2 = document.getElementById('t2').value.split(':');
        let d1 = new Date(0,0,0,t1[0],t1[1]), d2 = new Date(0,0,0,t2[0],t2[1]);
        if (d2 <= d1) d2.setDate(d2.getDate() + 1);
        let diff = d2 - d1;
        const res = document.getElementById('res');
        res.style.display = "block";
        res.innerHTML = `Set to: <strong>${Math.floor(diff/3600000)}:${new Date(diff).getUTCMinutes().toString().padStart(2,'0')}</strong>`;
    }

    function renderSearch() {
        viewTitle.innerText = "Global Search";
        view.innerHTML = `
            <input type="text" id="qs" placeholder="Search world recipes...">
            <button class="card" style="width:100%; background:var(--search-theme); color:white; border:none; padding:15px;" onclick="apiSearch()">üîç SEARCH ONLINE</button>
            <div id="api-res"></div>
        `;
    }

    async function apiSearch() {
        const q = document.getElementById('qs').value || 'bread';
        const resDiv = document.getElementById('api-res');
        resDiv.innerHTML = "Searching...";
        try {
            const r = await fetch(`https://api.spoonacular.com/recipes/complexSearch?query=${q}&number=8&apiKey=${API_KEY}`);
            const data = await r.json();
            resDiv.innerHTML = data.results.map(i => `<div class="card" onclick="fetchApiDetail(${i.id})"><b>${i.title}</b></div>`).join('');
        } catch(e) { resDiv.innerHTML = "API limit reached."; }
    }

    async function fetchApiDetail(id) {
        view.innerHTML = "Loading...";
        const r = await fetch(`https://api.spoonacular.com/recipes/${id}/information?apiKey=${API_KEY}`);
        const data = await r.json();
        renderDetail({
            name: data.title,
            img: data.image,
            ingredients: data.extendedIngredients.map(i => i.original),
            instructions: data.instructions,
            tips: "External source."
        }, 'search');
    }

    // Start de app op de broodlijst
    navigate('bread');
</script>
</body>
</html>
