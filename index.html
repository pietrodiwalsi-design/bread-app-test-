<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Bread & Soup Pro</title>
    <style>
        :root {
            --primary: #8d6e63;
            --dark: #4e342e;
            --accent: #ffa726;
            --soup-theme: #d32f2f;
            --search-theme: #546e7a;
            --bg: #fdf5e6;
            --glass: rgba(255, 255, 255, 0.98);
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100dvh;
            overflow: hidden; background-color: var(--bg);
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background: var(--bg) url('https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1000') center/cover fixed;
            display: flex; justify-content: center;
        }

        .app-shell {
            width: 100%; max-width: 500px; height: 100dvh;
            background: var(--glass); backdrop-filter: blur(12px);
            display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.2);
        }

        header {
            padding: env(safe-area-inset-top) 1rem 1rem 1rem;
            text-align: center; background: white; border-bottom: 1px solid #eee;
            font-weight: bold; flex-shrink: 0;
        }

        main { flex: 1; overflow-y: auto; padding: 1.2rem; -webkit-overflow-scrolling: touch; }

        nav {
            flex-shrink: 0; width: 100%; height: calc(75px + env(safe-area-inset-bottom));
            background: white; display: flex; border-top: 1px solid #eee;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .nav-btn {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            justify-content: center; font-size: 0.7rem; color: #888;
            cursor: pointer; border: none; background: none;
        }

        .nav-btn.active { color: var(--primary); font-weight: bold; }
        .nav-btn span { font-size: 1.4rem; margin-bottom: 2px; }

        .card {
            background: white; border-radius: 12px; padding: 1rem; margin-bottom: 1rem;
            border-left: 6px solid var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            text-align: left;
        }
        .card.soup { border-left-color: var(--soup-theme); }
        .card.general { border-left-color: var(--accent); }

        .img-hero {
            width: 100%; height: 200px; border-radius: 10px; object-fit: cover;
            margin-bottom: 1rem; background: #eee;
        }

        .info-block { background: #fafafa; padding: 1rem; border-radius: 10px; margin-bottom: 1rem; border: 1px solid #eee; font-size: 0.95rem; line-height: 1.6; }
        .pro-tip { background: #fff3e0; border-left: 4px solid var(--accent); padding: 1rem; border-radius: 8px; font-size: 0.9rem; }
        
        input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin-bottom: 1rem; font-size: 1rem; }
        ul { padding-left: 20px; }
        li { margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="app-shell">
    <header id="view-title">Bread & Soup Specialist</header>
    <main id="app-view"></main>
    <nav>
        <button class="nav-btn" onclick="navigate('search')"><span>üåç</span>Search</button>
        <button class="nav-btn active" onclick="navigate('bread')"><span>üìü</span>Machine</button>
        <button class="nav-btn" onclick="navigate('general')"><span>ü•ñ</span>General</button>
        <button class="nav-btn" onclick="navigate('soup')"><span>ü•£</span>Soup</button>
        <button class="nav-btn" onclick="navigate('timer')"><span>‚è∞</span>Timer</button>
    </nav>
</div>

<script>
    const API_KEY = "2386c821382b4094a3045c9c6ffd588d";

    /* DATABASE MACHINE BREADS (14 Recipes) */
    const MACHINE_DB = [
        { name: "Basic White Bread", img: "witbrood.png", program: "Basic (Menu 1)", pairing: "Hearty Vegetable Beef Soup", ingredients: ["1 tsp yeast", "500g bread flour", "30g butter", "1.5 tbsp sugar", "1.5 tsp salt", "340ml water"], toppings: "Optional: Poppy seeds", instructions: "Place ingredients in the pan in the order listed. Run Menu 1. Select 'Medium' crust.", tips: "Use high protein bread flour for maximum lift." },
        { name: "Potato Rosemary Bread", img: "aardappelbrood.png", program: "Basic (Menu 1)", pairing: "Chicken Pot Pie Soup", ingredients: ["1 tsp yeast", "400g spelt flour", "10g butter", "1¬æ tsp salt", "150g mashed potatoes", "2 tbsp rosemary", "150ml water"], toppings: "Sea salt", instructions: "Ensure mashed potatoes are cool before adding. Start Menu 1.", tips: "Potatoes add moisture and keep the bread fresh longer." },
        { name: "Brioche (Classic)", img: "brioche_brood.png", program: "Brioche (Menu 10)", pairing: "Roasted Tomato Soup", ingredients: ["1.25 tsp yeast", "400g flour", "50g sugar", "60g butter", "2 eggs", "80g extra cold butter"], toppings: "Egg wash", instructions: "Add the first butter at start. Add the 80g extra butter cubes when the machine beeps.", tips: "The extra butter must be ice-cold." },
        { name: "French Bread", img: "frans_stokbrood.png", program: "French (Menu 11)", pairing: "Dutch Brown Bean Soup", ingredients: ["1 tsp yeast", "400g white flour", "1.5 tsp salt", "290ml water"], toppings: "None", instructions: "Run Menu 11. This is a 6-hour cycle.", tips: "No fat or sugar makes this bread extra crispy." },
        { name: "Whole Wheat", img: "volkorenbrood.png", program: "Whole Wheat (Menu 7)", pairing: "Lentil & Bacon Soup", ingredients: ["1 tsp yeast", "400g whole wheat flour", "20g butter", "280ml water"], toppings: "None", instructions: "Menu 7. Includes a rest period to hydrate the bran.", tips: "Nutritious and very filling." },
        { name: "Pizza Dough", img: "pizza_deeg.png", program: "Pizza (Menu 23)", pairing: "Roasted Tomato Soup", ingredients: ["1 tsp yeast", "450g flour", "4 tbsp oil", "240ml water"], toppings: "None", instructions: "Runs for 45 mins. Roll out and bake at 220¬∞C.", tips: "Let rest for 10 mins after cycle before rolling." },
        { name: "Protein Bread (S)", img: "proteine.png", program: "Whole Wheat (Menu 5)", pairing: "Creamy Zucchini-Herb Soup", ingredients: ["¬æ tsp yeast", "291g flour", "128g cottage cheese", "125g egg whites"], toppings: "Pumpkin seeds", instructions: "Add liquid ingredients first. Run Menu 5.", tips: "High protein, very moist texture." },
        { name: "Cashew & Walnut Bread", img: "notenbrood.png", program: "Basic Raisin (Menu 3)", pairing: "Chickpea & Sweet Potato Soup", ingredients: ["1 tsp yeast", "400g flour", "150g mixed nuts", "280ml water"], toppings: "Sesame", instructions: "Add nuts to the dispenser or at the beep.", tips: "Toast nuts briefly before adding for more flavor." },
        { name: "Focaccia", img: "focaccia_brood.png", program: "Dough (Menu 23/24)", pairing: "Minestrone", ingredients: ["0.5 tsp yeast", "300g flour", "1 tbsp olive oil", "170ml water"], toppings: "Rosemary & Sea salt", instructions: "Machine kneads. Remove, press into oiled tray, dimple, rise 30m, bake 200¬∞C.", tips: "Press dimples deep." },
        { name: "Christmas Gingerbread", img: "brioche_brood.png", program: "Cake (Menu 15)", pairing: "Spicy Carrot Soup", ingredients: ["3 ripe bananas", "170g flour", "2 eggs", "Spices", "100g dates"], toppings: "None", instructions: "Mix wet ingredients. Scrape pan edges after 2 mins mixing.", tips: "Best served slightly warm." },
        { name: "Panettone Style", img: "panettone.png", program: "Basic Raisin (Menu 3)", pairing: "None", ingredients: ["7g yeast", "500g flour", "100g butter", "Milk", "Dried fruits"], toppings: "Icing sugar", instructions: "Add fruits at the beep. Use 'Light' crust setting.", tips: "Needs fresh yeast to lift the heavy fruits." },
        { name: "Crispy Herb Bread (Oven)", img: "frans_stokbrood.png", program: "Dough (Menu 17) + Oven", pairing: "Hearty Vegetable Beef Soup", ingredients: ["1 tbsp yeast", "500g flour", "Herbs", "260ml water"], toppings: "Olive oil", instructions: "Knead in machine. Shape, rise 45m. Bake 230¬∞C with steam.", tips: "Spray oven with water for crust." },
        { name: "Strawberry Jam", img: "jam.png", program: "Jam (Menu 21)", ingredients: ["300g strawberries", "200g sugar", "7g pectin"], toppings: "None", instructions: "Cut fruit small. Run Menu 21. Pour into jars hot.", tips: "Sterilize jars first." },
        { name: "Fruit Compote", img: "witbrood.png", program: "Compote (Menu 22)", ingredients: ["400g fruit", "2 tbsp sugar", "1 tbsp water"], toppings: "None", instructions: "Menu 22. Perfect for topping yogurt.", tips: "Cut fruit into equal 2cm cubes." }
    ];

    /* DATABASE GENERAL BREADS (19 Recipes) */
    const GENERAL_DB = [
        { name: "Classic White Artisan Loaf", img: "classic_white_artisan_loaf.png", program: "Oven (Manual)", ingredients: ["500g bread flour", "300ml water", "7g yeast", "10g salt"], pairing: "Hearty Vegetable Beef Soup", toppings: "Flour", instructions: "Knead, rise 1h. Shape, rise 45m. Bake at 220¬∞C for 30m.", tips: "Steam in oven is crucial for the crust." },
        { name: "Naan Bread", img: "naan_bread.png", program: "Frying Pan", ingredients: ["300g flour", "125ml yogurt", "Yeast", "Garlic butter"], pairing: "Mulligatawny Soup", toppings: "Nigella seeds", instructions: "Knead, rise 1h. Roll flat. Fry in dry pan 2m per side.", tips: "Brush with garlic butter immediately." },
        { name: "Soft Milk Rolls", img: "soft_milk_rolls.png", program: "Oven", ingredients: ["450g flour", "250ml milk", "1 egg", "30g butter"], pairing: "Chicken Pot Pie Soup", toppings: "Egg wash", instructions: "Knead, rise. Shape 10 balls. Rise 30m. Bake 200¬∞C 15m.", tips: "Milk makes the crumb pillowy soft." },
        { name: "French Stick (Baguette)", img: "french_stick_baguette.png", program: "Oven", ingredients: ["450g flour", "290ml water", "Yeast", "Salt"], pairing: "Mulligatawny Soup", toppings: "None", instructions: "Rise, shape, rise 50m. Score diagonally. Bake 220¬∞C.", tips: "Spray with water for a crispy finish." },
        { name: "Cheese & Onion Rolls", img: "cheese_onion_rolls.png", program: "Oven", ingredients: ["White dough", "1 onion", "100g cheese"], pairing: "Roasted Tomato Soup", toppings: "Extra cheese", instructions: "Top flattened dough balls with onion/cheese. Bake 200¬∞C.", tips: "Saut√© onion first for sweetness." },
        { name: "Sunflower Seed Rolls", img: "whole_wheat_sunflower_seed_rolls.png", program: "Oven", ingredients: ["Whole wheat/White mix", "300ml water", "Sunflower seeds"], pairing: "Dutch Brown Bean Soup", toppings: "Extra seeds", instructions: "Divide dough (12 balls). Rise 40m. Bake 200¬∞C 25m.", tips: "Seeds inside AND on top." },
        { name: "Bagels", img: "bagels.png", program: "Boil & Bake", ingredients: ["450g flour", "250ml water", "Sugar", "Yeast"], pairing: "Creamy Zucchini-Herb Soup", toppings: "Poppy seeds", instructions: "Form rings, rise 30m. Boil 1m per side. Bake 200¬∞C 25m.", tips: "Boiling creates the chewy texture." },
        { name: "Pita Bread", img: "pita_bread.png", program: "Oven", ingredients: ["300g flour", "180ml water", "Oil", "Yeast"], pairing: "Chickpea & Sweet Potato Soup", toppings: "None", instructions: "Roll thin. Bake 240¬∞C for 5-8m until puffed.", tips: "Don't overbake; they should be soft." },
        { name: "Hot Cross Buns", img: "hot_cross_buns.png", program: "Oven", ingredients: ["475g flour", "Milk", "Dried fruit", "Spices"], pairing: "Spicy Carrot Soup", toppings: "Sugar glaze", instructions: "Shape 12 buns. Pipe flour paste crosses. Bake 200¬∞C.", tips: "Glaze while hot for shine." },
        { name: "Potato Bread (Rosemary)", img: "potato_bread_with_rosemary.png", program: "Oven", ingredients: ["400g flour", "150g mashed potato", "Rosemary"], pairing: "Spicy Carrot Soup", toppings: "Rosemary", instructions: "Knead all, rise, shape round. Bake 210¬∞C 35m.", tips: "The ultimate comfort bread." },
        { name: "Steamed Buns (Bapao)", img: "steamed_buns_broodje_bapao.png", program: "Steamer", ingredients: ["250g flour", "150ml milk", "Meat/Veg filling"], pairing: "Mulligatawny Soup", toppings: "None", instructions: "Fill balls, fold, rise 20m. Steam 12m.", tips: "Use parchment paper underneath." },
        { name: "Crusty Herb Bread", img: "crusty_bread_with_rosemary_thyme.png", program: "Oven", ingredients: ["500g flour", "300ml water", "Rosemary/Thyme"], pairing: "Hearty Vegetable Beef Soup", toppings: "Herbs", instructions: "Knead 20m, rise 1.5h. Bake at 230¬∞C.", tips: "Steam is vital for crust." },
        { name: "Keto Yeast Bread", img: "keto_low_carb_yeast_bread.png", program: "Oven", ingredients: ["Wheat gluten", "Soy/Almond flour", "Flax meal"], pairing: "Creamy Zucchini-Herb Soup", toppings: "None", instructions: "Knead well (rubbery dough). Rise 90m. Bake 175¬∞C.", tips: "Relies on gluten for structure." },
        { name: "Easter Bunny Rolls", img: "easter_bunny_rolls.png", program: "Oven", ingredients: ["450g flour", "Milk", "Butter", "Sugar/Cinnamon"], pairing: "Chicken Pot Pie Soup", toppings: "Icing", instructions: "Roll, fill, cut. Form ears. Bake 190¬∞C.", tips: "Kids love these." },
        { name: "Six-Seed Small Loaf", img: "six_seed_small_loaf.png", program: "Oven", ingredients: ["250g wholemeal", "Mixed seeds", "Honey"], pairing: "Dutch Brown Bean Soup", toppings: "Mixed seeds", instructions: "Toast seeds. Knead dough. Shape boule. Bake 200¬∞C.", tips: "Toasting seeds adds depth." },
        { name: "Tomato & Parmesan Bread", img: "tomato_parmesan_bread.png", program: "Oven", ingredients: ["500g flour", "Sundried tomatoes", "Parmesan"], pairing: "Roasted Tomato Soup", toppings: "Parmesan", instructions: "Add tomatoes/cheese at end of kneading. Bake 200¬∞C.", tips: "Savory Italian delight." },
        { name: "GF Christmas Bread", img: "gluten_free_christmas_bread_with_nuts.png", program: "Oven", ingredients: ["Rice flour", "Potato starch", "Psyllium", "Nuts"], pairing: "Chicken Pot Pie Soup", toppings: "Mixed nuts", instructions: "Mix, fold in nuts. Rise 50m. Bake 190¬∞C.", tips: "Psyllium husk replaces gluten." }
    ];

    /* DATABASE SOUPS (10 Recipes) */
    const SOUP_DB = [
        { 
            name: "Hearty Vegetable Beef Soup", 
            img: "hearty_vegetable_beef_soup.png", 
            pairing: "Classic White Artisan Loaf", 
            ingredients: ["4 oz butter", "Mirepoix (onion/carrot/celery)", "1 lb beef (small dice)", "3 qt beef broth", "Turnip", "Green beans", "Tomato concass√©e", "Corn", "Oregano/Thyme"], 
            instructions: "1. Sweat: Sweat mirepoix and turnip in butter. <br>2. Add Beef: Add broth and diced beef. Bring to simmer with a herb sachet. <br>3. Simmer: Cook until tender (~1 hour). <br>4. Finish: Add beans, tomatoes, corn, and herbs. Simmer 15 more minutes.", 
            tips: "Stir in leafy greens at the end for extra nutrition." 
        },
        { 
            name: "Chicken Pot Pie Soup (Creamy)", 
            img: "chicken_pot_pie_soup.png", 
            pairing: "Soft Milk Rolls", 
            ingredients: ["Chicken breast/thighs", "Mirepoix", "Potatoes (cubed)", "4 tbsp Butter/Flour (Roux)", "Chicken stock", "Cream", "Peas"], 
            instructions: "1. Saut√©: Cook mirepoix and chicken until cooked. <br>2. Roux: Melt butter, whisk in flour, cook 1 min. <br>3. Simmer: Add stock and potatoes. Simmer until tender. <br>4. Finish: Season and stir in cream (don't boil).", 
            tips: "If too thin, use a cornstarch slurry to thicken." 
        },
        { 
            name: "Dutch Brown Bean Soup", 
            img: "dutch_brown_bean_soup.png", 
            pairing: "French Stick (Baguette)", 
            ingredients: ["500g brown beans", "Beef shank (schenkel)", "Leek/Celery/Onion", "2 Potatoes", "Rookworst", "Beef bouillon"], 
            instructions: "1. Soak: Soak beans overnight. <br>2. Saut√©: Saut√© onion/leek. <br>3. Combine: Add water, meat, bouillon, potatoes, and beans. <br>4. Simmer: Cook for 1.5 hours. Add sliced sausage in last 20 mins.", 
            tips: "Better the next day! Pur√©e a portion of the beans for texture." 
        },
        { 
            name: "Mulligatawny Soup", 
            img: "mulligatawny_soup.png", 
            pairing: "Naan Bread", 
            ingredients: ["3 lb mirepoix", "Curry powder", "Chicken meat", "Green apple (dice)", "Mushrooms", "Chicken stock", "Half-and-half"], 
            instructions: "1. Saut√©: Saut√© mirepoix 10m. <br>2. Roux: Add flour and curry powder. <br>3. Simmer: Add stock. Simmer 15 mins. <br>4. Finish: Add chicken, apple, mushrooms, and warm half-and-half. Return to simmer.", 
            tips: "Serve garnished with chives over rice." 
        },
        { 
            name: "Minestrone (Rich Italian)", 
            img: "minestrone.png", 
            pairing: "Focaccia", 
            ingredients: ["Mirepoix", "Veg stock", "Pasta", "Beans", "Parmesan"], 
            instructions: "Saut√© veg. Add stock, beans, and pasta. Simmer until tender. Garnish with basil.", 
            tips: "A hearty classic." 
        },
        { 
            name: "Spicy Carrot Soup", 
            img: "spicy_carrot.png", 
            pairing: "Potato Rosemary Bread", 
            ingredients: ["Carrots", "Onion", "Spices", "Stock", "Yogurt"], 
            instructions: "Toast spices. Simmer carrots in stock. Blend smooth. Swirl in yogurt.", 
            tips: "Toasting spices is key." 
        },
        { 
            name: "Creamy Zucchini-Herb Soup", 
            img: "zucchini_herb.png", 
            pairing: "Keto Yeast Bread", 
            ingredients: ["Zucchini", "Arugula", "Herbs", "Cream cheese"], 
            instructions: "Simmer zucchini/arugula/herbs. Blend. Stir in cream cheese.", 
            tips: "Use less stock than other soups." 
        },
        { 
            name: "Creamy Mustard Soup", 
            img: "creamy_mustard.png", 
            pairing: "Basic White Bread", 
            ingredients: ["Leek", "Potato", "Mustard", "Cream"], 
            instructions: "Fry leek/potato. Simmer with stock and mustard. Blend. Add cream.", 
            tips: "Use coarse Groninger mustard." 
        },
        { 
            name: "Chickpea & Sweet Potato", 
            img: "chickpea_sweet_potato.png", 
            pairing: "Pita Bread", 
            ingredients: ["Chickpeas", "Sweet potato", "Pepper", "Lime"], 
            instructions: "Simmer all for 20 mins. Puree smooth. Finish with lime.", 
            tips: "Naturally thickens." 
        },
        { 
            name: "Roasted Tomato Soup", 
            img: "roasted_tomato.png", 
            pairing: "Tomato & Parmesan Bread", 
            ingredients: ["Tomatoes", "Balsamic", "Pepper", "Basil"], 
            instructions: "Saut√© veg, deglaze with balsamic, simmer 15m, blend.", 
            tips: "Perfect with cheese rolls." 
        }
    ];

    const view = document.getElementById('app-view');
    const viewTitle = document.getElementById('view-title');

    function navigate(target) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        const activeBtn = document.querySelector(`.nav-btn[onclick="navigate('${target}')"]`);
        if(activeBtn) activeBtn.classList.add('active');
        view.innerHTML = ""; view.scrollTo(0,0);

        switch(target) {
            case 'search': renderSearch(); break;
            case 'bread': renderList(MACHINE_DB, 'bread'); break;
            case 'general': renderList(GENERAL_DB, 'general'); break;
            case 'soup': renderList(SOUP_DB, 'soup'); break;
            case 'timer': renderTimer(); break;
        }
    }

    function renderList(db, type) {
        const titles = { bread: "Panasonic Machine", general: "General Oven Bread", soup: "Soup Specialist" };
        viewTitle.innerText = titles[type];
        db.forEach((item) => {
            const card = document.createElement('div');
            card.className = `card ${type}`;
            card.innerHTML = `<div style="font-weight:bold; display:flex; justify-content:space-between; align-items:center;">${item.name} <span>‚ûú</span></div>`;
            card.onclick = () => renderDetail(item, type);
            view.appendChild(card);
        });
    }

    function renderDetail(item, type) {
        const pairingIcon = (type === 'soup') ? 'ü•ñ' : 'ü•£';
        view.innerHTML = `
            <button onclick="navigate('${type}')" style="background:none; border:none; color:#888; margin-bottom:1rem; cursor:pointer; font-weight:bold;">‚¨Ö BACK</button>
            ${item.pairing && item.pairing !== 'None' ? `<div style="background:#f1f8e9; padding:12px; border-radius:8px; margin-bottom:15px; color:#2e7d32; font-weight:bold; font-size:0.85rem;">${pairingIcon} PAIRS WITH: ${item.pairing}</div>` : ''}
            <img src="${item.img}" class="img-hero" onerror="this.src='https://via.placeholder.com/450x200?text=${item.name}'">
            <h2 style="margin:0;">${item.name}</h2>
            ${item.program ? `<div class="info-block"><strong>Method:</strong> ${item.program}</div>` : ''}
            <div class="info-block"><strong>Ingredients:</strong><ul>${item.ingredients.map(i => `<li>${i}</li>`).join('')}</ul></div>
            ${item.toppings ? `<div class="info-block"><strong>Toppings:</strong> ${item.toppings}</div>` : ''}
            ${item.instructions ? `<div class="info-block"><strong>Instructions:</strong><br>${item.instructions}</div>` : ''}
            <div class="pro-tip"><strong>Expert Tips:</strong><br>${item.tips}</div>
        `;
        view.scrollTo(0,0);
    }

    function renderTimer() {
        viewTitle.innerText = "Panasonic Timer";
        view.innerHTML = `<div class="info-block"><p>Current Time:</p><input type="time" id="t1" value="${new Date().toTimeString().slice(0,5)}"><p>Ready At:</p><input type="time" id="t2"><button class="card" style="width:100%; background:var(--dark); color:white; border:none; margin-top:10px; padding:15px;" onclick="calculate()">CALCULATE</button></div><div id="res" class="info-block" style="display:none; text-align:center; font-size:1.8rem; background:#e8f5e9;"></div>`;
    }

    function calculate() {
        const t1 = document.getElementById('t1').value.split(':'), t2 = document.getElementById('t2').value.split(':');
        let d1 = new Date(0,0,0,t1[0],t1[1]), d2 = new Date(0,0,0,t2[0],t2[1]);
        if (d2 <= d1) d2.setDate(d2.getDate() + 1);
        let diff = d2 - d1;
        const res = document.getElementById('res'); res.style.display = "block";
        res.innerHTML = `Set to: <strong>${Math.floor(diff/3600000)}:${new Date(diff).getUTCMinutes().toString().padStart(2,'0')}</strong>`;
    }

    function renderSearch() {
        viewTitle.innerText = "Global Search";
        view.innerHTML = `<input type="text" id="qs" placeholder="Search world recipes..."><button class="card" style="width:100%; background:var(--search-theme); color:white; border:none; padding:15px;" onclick="apiSearch()">üîç SEARCH ONLINE</button><div id="api-res"></div>`;
    }

    async function apiSearch() {
        const q = document.getElementById('qs').value || 'bread';
        const resDiv = document.getElementById('api-res'); resDiv.innerHTML = "Searching...";
        try {
            const r = await fetch(`https://api.spoonacular.com/recipes/complexSearch?query=${q}&number=8&apiKey=${API_KEY}`);
            const data = await r.json();
            resDiv.innerHTML = data.results.map(i => `<div class="card" onclick="fetchApiDetail(${i.id})"><b>${i.title}</b></div>`).join('');
        } catch(e) { resDiv.innerHTML = "API error."; }
    }

    async function fetchApiDetail(id) {
        view.innerHTML = "Loading...";
        const r = await fetch(`https://api.spoonacular.com/recipes/${id}/information?apiKey=${API_KEY}`);
        const data = await r.json();
        renderDetail({ name: data.title, img: data.image, ingredients: data.extendedIngredients.map(i => i.original), instructions: data.instructions, tips: "External source." }, 'search');
    }

    navigate('bread');
</script>
</body>
</html>
